<div class="header">
    <div class="dragHandle" cdkDragHandle>{{value().transformationType}}</div>
    <div class="icon deleteIcon" (click)="deleteMatrix.emit()">delete</div>
</div>

@let dimensions = affectedDimensions();
@let m = matrixValue();
@let editx = dimensions.includes('x');
@let edity = dimensions.includes('y');

<math xmlns="http://www.w3.org/1998/Math/MathML">
    <mrow>
      <mo>(</mo>
      <mtable>
        @switch (value().transformationType) {
            @case ('Translation') {
                <mtr>
                    <mtd><mn>1</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                    <mtd class="highlight" [class.selected]="editx"><mn (click)="clickAffectedDimension('x')">{{ m.m41 | number: '1.2-2' }}</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>1</mn></mtd>
                    <mtd class="highlight" [class.selected]="edity"><mn (click)="clickAffectedDimension('y')">{{ m.m42 | number: '1.2-2' }}</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>1</mn></mtd>
                  </mtr>
            }
            @case ('Scaling') {
                <mtr>
                    <mtd class="highlight" [class.selected]="editx" (click)="clickAffectedDimension('x')"><mn>{{ m.m11 | number: '1.2-2' }}</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd><mn>0</mn></mtd>
                    <mtd class="highlight"[class.selected]="edity" (click)="clickAffectedDimension('y')"><mn>{{ m.m22 | number: '1.2-2' }}</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>1</mn></mtd>
                  </mtr>
            }
            @case ('Rotation') {
                <mtr>
                    <mtd class="highlight"><mn>{{ m.m11 | number: '1.2-2' }}</mn></mtd>
                    <mtd class="highlight"><mn>{{ m.m21 | number: '1.2-2' }}</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd class="highlight"><mn>{{ m.m12 | number: '1.2-2' }}</mn></mtd>
                    <mtd class="highlight"><mn>{{ m.m22 | number: '1.2-2' }}</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>1</mn></mtd>
                  </mtr>            
            }
            @case ('Shearing') {
                <mtr>
                    <mtd><mn>1</mn></mtd>
                    <mtd class="highlight" [class.selected]="editx" (click)="clickAffectedDimension('x')"><mn>{{ m.m21 | number: '1.2-2'}}</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd class="highlight" [class.selected]="edity" (click)="clickAffectedDimension('y')"><mn>{{ m.m12 | number: '1.2-2'}}</mn></mtd>
                    <mtd><mn>1</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                  </mtr>
                  <mtr>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>0</mn></mtd>
                    <mtd><mn>1</mn></mtd>
                  </mtr>
            }
        }
    </mtable>
    <mo>)</mo>
  </mrow>
</math>
<input type="range" [value]="sliderModel()" (input)="updateValueFromSlider($any($event.target).valueAsNumber)" [min]="formConstraints().min" [max]="formConstraints().max" [step]="formConstraints().step">